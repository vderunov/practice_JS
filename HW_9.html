<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>HW_9</title>
  </head>

  <body>
    <script>
      /* Переписать предыдущую домашнюю работу с использованием объектов и функций.

Реализовать логику:

1) человек вводит пароль,
2) если он валиден, тогда ему предлагают ввести число(третье задание из 
предыдущей работы),
3) если оно соответствует хотя бы одному из условий, то тогда он может ввести два 
числа для получения результата их сложения.
*/

      var password = prompt("Введите пароль: (Например: 123qqqQQQ)");

      function validatePassword(password) {
        if (!password) {
          return "INVALID";
        }

        if (password.length < 6 || password.length > 20) {
          alert("Длина пароля должна быть более 6 символов, но менее 20!");
          return "INVALID";
        }

        for (var i = 0; i < password.length; i++) {
          var check = password.charCodeAt(i);
          if (
            !(check >= 48 && check <= 57) &&
            !(check >= 65 && check <= 90) &&
            !(check >= 97 && check <= 122)
          ) {
            alert("Пароль должен содержать только буквенно-цифровые символы!");
            return "INVALID";
          }
        }

        for (var i = 0; i < password.length; i++) {
          if (!isNaN(password[i])) {
            var number = true;
          }
        }

        for (var i = 0; i < password.length; i++) {
          if (isNaN(password[i])) {
            var letter = true;
          }
        }

        if (number !== letter) {
          alert("Пароль должен содержать буквы и цифры!");
          return "INVALID";
        }

        return "VALID";
      }

      validatePassword();

      if (validatePassword(password) == "VALID") {
        var visitorNumber = prompt(
          `Введите число, которое соответствует трем разным требованиям:

-	число является простым
-	число четное
-	число кратное 10
`
        );
      }

      var ObjectMultiplicityOfTen = {
        prime: false,
        evenNumber: true,
        multiplicityOfTen: true
      };

      var ObjectEvenNumber = {
        prime: false,
        evenNumber: true,
        multiplicityOfTen: false
      };

      var ObjectPrime = {
        prime: true,
        evenNumber: false,
        multiplicityOfTen: false
      };

      var ObjectNumberTwo = {
        prime: true,
        evenNumber: true,
        multiplicityOfTen: false
      };

      var result;

      if (visitorNumber != null && visitorNumber != "") {
        function checkVisitorNumber() {
          if (visitorNumber % 10 == 0) {
            return (result = ObjectMultiplicityOfTen);
          }

          if (
            visitorNumber != 2 &&
            visitorNumber % 2 == 0 &&
            visitorNumber % 10 != 0
          ) {
            return (result = ObjectEvenNumber);
          }

          if (visitorNumber != 2 && visitorNumber > 1) {
            for (var i = 2; i <= visitorNumber; i++) {
              for (var j = 2; j <= visitorNumber; j++) {
                if (visitorNumber % j == 0) break;
              }
              if (j == visitorNumber) {
                return (result = ObjectPrime);
              }
            }
          }

          if (visitorNumber == 2) {
            return (result = ObjectNumberTwo);
          }

          if (visitorNumber % 10 != 0 || visitorNumber % 2 != 0) {
            alert(
              "Введенное число не соответствует указанным требованиям, а именно: число – не является простым, не четным и не кратным 10!"
            );
          }
        }

        checkVisitorNumber();
      }

      function isUserNumberForCheck(obj) {
        for (var key in obj) {
          if (obj[key] === true) {
            return true;
          }
        }
      }

      isUserNumberForCheck(result);

      function calcAddition() {
        if (isUserNumberForCheck(result)) {
          var visitorNumberForCalc1 = +prompt(
            "Введите первое число для выполнения сложения"
          );
        }

        if (
          isNaN(visitorNumberForCalc1) &&
          visitorNumberForCalc1 != undefined
        ) {
          return alert("Вводите только цифры, без букв!");
        }

        if (visitorNumberForCalc1) {
          var visitorNumberForCalc2 = +prompt(
            "Введите второе число для выполнения сложения"
          );
        }

        if (
          isNaN(visitorNumberForCalc2) &&
          visitorNumberForCalc2 != undefined
        ) {
          return alert("Вводите только цифры, без букв!");
        }

        if (visitorNumberForCalc1 || visitorNumberForCalc2) {
          var ResultOfAddition =
            +visitorNumberForCalc1 + +visitorNumberForCalc2;
          return alert(ResultOfAddition);
        }
      }

      calcAddition();
    </script>
  </body>
</html>
